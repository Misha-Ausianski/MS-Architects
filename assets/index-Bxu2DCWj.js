import{a as g,j as e,r as _,b as x}from"./index-CHpryTwM.js";import{B as h}from"./Breadcrumbs-BPIvTZX-.js";import{a as b}from"./queries-D9CSBw-c.js";import{S as y,A as j,P as v,a as f,N,b as P}from"./navigation-Bq04JcG4.js";import{R as k}from"./RelatedProjects-BdyT-z37.js";import"./client-DjpR4G2-.js";import"./ProjectCard-DAcsRVXp.js";const w="_gallery_34xk6_22",S="_slide_34xk6_31",C="_img_34xk6_41",E="_pagination_34xk6_50",M="_bullet_34xk6_63",$="_progress_34xk6_80",r={gallery:w,slide:S,img:C,pagination:E,bullet:M,progress:$};function R({children:s}){return typeof document>"u"?null:g.createPortal(s,document.body)}const q="_overlay_1swdc_1",A="_img_1swdc_12",B="_close_1swdc_23",u={overlay:q,img:A,close:B};function L({src:s,onClose:a}){return s?e.jsx(R,{children:e.jsxs("div",{className:u.overlay,onClick:a,children:[e.jsx("img",{className:u.img,src:s,alt:"",onClick:l=>l.stopPropagation()}),e.jsx("button",{className:u.close,onClick:a,"aria-label":"Close",children:"×"})]})}):null}function O({images:s}){const a=_.useRef(null),[l,i]=_.useState(null);return e.jsxs("div",{className:r.gallery,"data-bitrix-block":"PROJECT_GALLERY",children:[e.jsx(y,{modules:[j,v,f,N],slidesPerView:"auto",spaceBetween:20,loop:s.length>1,speed:600,watchOverflow:!0,observer:!0,observeParents:!0,resizeObserver:!0,autoHeight:!0,simulateTouch:!0,grabCursor:!0,autoplay:{delay:1e4,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{clickable:!0,renderBullet:(t,o)=>`<span class="${o} ${r.bullet}"><i class="${r.progress}"></i></span>`},onBeforeInit:t=>{t.params.pagination.el=a.current},onAutoplayTimeLeft:(t,o,p)=>{var m;const d=(m=a.current)==null?void 0:m.querySelector(".swiper-pagination-bullet-active");d&&d.style.setProperty("--p",`${Math.round((1-p)*100)}%`)},onSlideChange:()=>{var t;(t=a.current)==null||t.querySelectorAll(`.${r.bullet}`).forEach(o=>o.style.setProperty("--p","0%"))},children:s.map((t,o)=>e.jsx(P,{children:e.jsx("button",{className:r.slide,onClick:()=>i(t),"aria-label":"Открыть изображение",children:e.jsx("img",{className:r.img,src:t,alt:"",loading:"lazy"})})},o))}),e.jsx("div",{className:r.pagination,ref:a}),e.jsx(L,{src:l,onClose:()=>i(null)})]})}const T="_meta_apfoo_1",I="_item_apfoo_7",z="_label_apfoo_13",D="_value_apfoo_20",c={meta:T,item:I,label:z,value:D};function G({project:s}){const a=[s.customer&&{label:"Заказчик",value:s.customer},s.category&&{label:"Наименование проекта",value:s.category},s.area_m2&&{label:"Площадь",value:`${s.area_m2} м²`},s.city&&{label:"Локация",value:s.city},s.year&&{label:"Год создания",value:s.year}].filter(Boolean);return e.jsx("dl",{className:c.meta,"data-bitrix-block":"PROJECT_META",children:a.map((l,i)=>e.jsxs("div",{className:c.item,children:[e.jsx("dt",{className:c.label,children:l.label}),e.jsx("dd",{className:c.value,children:l.value})]},i))})}const H="_head_h3q6s_1",J="_title_h3q6s_7",F="_row_h3q6s_13",V="_projectMeta_h3q6s_22",Y="_content_h3q6s_31",n={head:H,title:J,row:F,projectMeta:V,content:Y};function se(){const{slug:s=""}=x(),{data:a,isLoading:l}=b(s);return l||!a?e.jsx("div",{className:"skeleton-page"}):e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx(O,{images:a.gallery}),e.jsx("div",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:n.head,children:e.jsx("h1",{className:n.title,children:a.title})}),e.jsxs("div",{className:n.row,children:[e.jsx("aside",{className:n.projectMeta,children:e.jsx(G,{project:a})}),e.jsx("article",{className:n.content,children:a.content?e.jsx("div",{dangerouslySetInnerHTML:{__html:a.content}}):e.jsx("p",{children:a.excerpt})})]})]})}),e.jsx(k,{serviceSlug:a.serviceSlug,currentSlug:a.slug,limit:3})]})}export{se as default};
