import{b as N,j as t,r as d,c as w}from"./index-BF3ffUBX.js";import{B as P}from"./Breadcrumbs-DV-mqVUQ.js";import{a as k}from"./queries-BJlnnZ4Z.js";import{S,A as R,P as C,a as E,N as $,b as A}from"./navigation-Bd7rG52E.js";import{R as M}from"./RelatedProjects-tczSl_js.js";import"./client-kY1bp0l0.js";import"./ProjectCard-BXMCVumH.js";const T="_gallery_l1kft_18",B="_slide_l1kft_27",L="_img_l1kft_37",O="_pagination_l1kft_46",I="_bullet_l1kft_59",z="_progress_l1kft_76",i={gallery:T,slide:B,img:L,pagination:O,bullet:I,progress:z};function q({children:s}){return typeof document>"u"?null:N.createPortal(s,document.body)}const D="_overlay_1swdc_1",F="_img_1swdc_12",G="_close_1swdc_23",g={overlay:D,img:F,close:G};function H({src:s,onClose:l}){return s?t.jsx(q,{children:t.jsxs("div",{className:g.overlay,onClick:l,children:[t.jsx("img",{className:g.img,src:s,alt:"",onClick:n=>n.stopPropagation()}),t.jsx("button",{className:g.close,onClick:l,"aria-label":"Close",children:"×"})]})}):null}function J({images:s}){const l=d.useRef(null),n=d.useRef(null),[m,_]=d.useState(null),f=(e,a)=>`<span class="${a} ${i.bullet}" tabindex="0">
       <i class="${i.progress}" data-progress></i>
     </span>`,y=e=>{var r,o,u,x,b,h,j,v;if(!e||!l.current)return;(!e.params.pagination||typeof e.params.pagination=="boolean")&&(e.params.pagination={enabled:!0});const a=e.params.pagination;a.el=l.current,a.clickable=!0,a.renderBullet=f,e.pagination&&((o=(r=e.pagination).destroy)==null||o.call(r),(x=(u=e.pagination).init)==null||x.call(u),(h=(b=e.pagination).render)==null||h.call(b),(v=(j=e.pagination).update)==null||v.call(j))};return d.useEffect(()=>{const e=n.current;if(!e)return;y(e);const a=setTimeout(()=>{var r,o;e.update(),(o=(r=e.pagination)==null?void 0:r.update)==null||o.call(r)},0);return()=>clearTimeout(a)},[s.length]),t.jsxs("div",{className:i.gallery,"data-bitrix-block":"PROJECT_GALLERY",children:[t.jsx(S,{modules:[R,C,E,$],onSwiper:e=>{n.current=e},onInit:e=>{y(e)},slidesPerView:"auto",spaceBetween:20,loop:s.length>1,speed:600,watchOverflow:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,updateOnWindowResize:!0,autoHeight:!0,simulateTouch:!0,grabCursor:!0,autoplay:{delay:1e4,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{enabled:!0,clickable:!0,renderBullet:f},onAfterInit:e=>{var a,r;e.update(),(r=(a=e.pagination)==null?void 0:a.update)==null||r.call(a)},onResize:e=>{var a,r;e.update(),(r=(a=e.pagination)==null?void 0:a.update)==null||r.call(a)},onImagesReady:e=>{var a,r;e.update(),(r=(a=e.pagination)==null?void 0:a.update)==null||r.call(a)},onAutoplayTimeLeft:(e,a,r)=>{var u;const o=(u=l.current)==null?void 0:u.querySelector(".swiper-pagination-bullet-active [data-progress]");o&&o.style.setProperty("--p",`${((1-r)*100).toFixed(0)}%`)},onSlideChange:()=>{var e;(e=l.current)==null||e.querySelectorAll("[data-progress]").forEach(a=>a.style.setProperty("--p","0%"))},children:s.map((e,a)=>t.jsx(A,{style:{width:"auto"},children:t.jsx("button",{className:i.slide,onClick:()=>_(e),"aria-label":"Открыть изображение",children:t.jsx("img",{className:i.img,src:e,alt:"",loading:"lazy"})})},a))}),t.jsx("div",{className:`${i.pagination} swiper-pagination`,ref:l}),t.jsx(H,{src:m,onClose:()=>_(null)})]})}const V="_meta_apfoo_1",W="_item_apfoo_7",Y="_label_apfoo_13",K="_value_apfoo_20",p={meta:V,item:W,label:Y,value:K};function Q({project:s}){const l=[s.customer&&{label:"Заказчик",value:s.customer},s.category&&{label:"Наименование проекта",value:s.category},s.area_m2&&{label:"Площадь",value:`${s.area_m2} м²`},s.city&&{label:"Локация",value:s.city},s.year&&{label:"Год создания",value:s.year}].filter(Boolean);return t.jsx("dl",{className:p.meta,"data-bitrix-block":"PROJECT_META",children:l.map((n,m)=>t.jsxs("div",{className:p.item,children:[t.jsx("dt",{className:p.label,children:n.label}),t.jsx("dd",{className:p.value,children:n.value})]},m))})}const U="_head_1l42r_1",X="_title_1l42r_8",Z="_category_1l42r_14",ee="_row_1l42r_25",te="_projectMeta_1l42r_34",ae="_content_1l42r_43",c={head:U,title:X,category:Z,row:ee,projectMeta:te,content:ae};function ue(){const{slug:s=""}=w(),{data:l,isLoading:n}=k(s);return n||!l?t.jsx("div",{className:"skeleton-page"}):t.jsxs(t.Fragment,{children:[t.jsx(P,{}),t.jsx(J,{images:l.gallery}),t.jsx("div",{className:"section",children:t.jsxs("div",{className:"container",children:[t.jsxs("div",{className:c.head,children:[t.jsx("h1",{className:c.title,children:l.title}),t.jsx("div",{className:c.category,children:l.category})]}),t.jsxs("div",{className:c.row,children:[t.jsx("aside",{className:c.projectMeta,children:t.jsx(Q,{project:l})}),t.jsx("article",{className:c.content,children:l.content?t.jsx("div",{dangerouslySetInnerHTML:{__html:l.content}}):t.jsx("p",{children:l.excerpt})})]})]})}),t.jsx(M,{serviceSlug:l.serviceSlug,currentSlug:l.slug,limit:3})]})}export{ue as default};
