import{b as x,j as e,r as c,c as f}from"./index-CW4-3BX_.js";import{B as b}from"./Breadcrumbs-BqPpM6sj.js";import{a as h}from"./queries-kmxlpA9a.js";import{S as j,A as v,P as N,a as w,N as P,b as S}from"./navigation-BJ002Eeo.js";import{R}from"./RelatedProjects-Dm170q_h.js";import"./client-B4VHpez7.js";import"./ProjectCard-MGTMSAaS.js";const C="_gallery_985in_22",E="_slide_985in_31",k="_img_985in_41",A="_pagination_985in_50",M="_bullet_985in_63",T="_progress_985in_80",n={gallery:C,slide:E,img:k,pagination:A,bullet:M,progress:T};function $({children:t}){return typeof document>"u"?null:x.createPortal(t,document.body)}const L="_overlay_1swdc_1",O="_img_1swdc_12",B="_close_1swdc_23",_={overlay:L,img:O,close:B};function I({src:t,onClose:a}){return t?e.jsx($,{children:e.jsxs("div",{className:_.overlay,onClick:a,children:[e.jsx("img",{className:_.img,src:t,alt:"",onClick:l=>l.stopPropagation()}),e.jsx("button",{className:_.close,onClick:a,"aria-label":"Close",children:"×"})]})}):null}function q({images:t}){const a=c.useRef(null),l=c.useRef(null),[d,p]=c.useState(null);return c.useEffect(()=>{var i;const s=((i=l.current)==null?void 0:i.swiper)??l.current;if(!s)return;const r=setTimeout(()=>s.update(),0);return()=>clearTimeout(r)},[t]),e.jsxs("div",{className:n.gallery,"data-bitrix-block":"PROJECT_GALLERY",children:[e.jsx(j,{ref:l,modules:[v,N,w,P],slidesPerView:"auto",spaceBetween:20,loop:t.length>1,speed:600,watchOverflow:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,updateOnWindowResize:!0,autoHeight:!0,simulateTouch:!0,grabCursor:!0,autoplay:{delay:1e4,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{clickable:!0,renderBullet:(s,r)=>`<span class="${r} ${n.bullet}" tabindex="0" aria-current="false">
               <i class="${n.progress}" data-progress></i>
             </span>`},onBeforeInit:s=>{s.params.pagination.el=a.current},onAfterInit:s=>s.update(),onResize:s=>s.update(),onImagesReady:s=>s.update(),onAutoplayTimeLeft:(s,r,i)=>{var y;const m=(y=a.current)==null?void 0:y.querySelector(".swiper-pagination-bullet-active"),g=m==null?void 0:m.querySelector("[data-progress]");g&&g.style.setProperty("--p",`${(1-i)*100}%`)},onSlideChange:()=>{var s;(s=a.current)==null||s.querySelectorAll("[data-progress]").forEach(r=>r.style.setProperty("--p","0%"))},children:t.map((s,r)=>e.jsx(S,{style:{width:"auto"},children:e.jsx("button",{className:n.slide,onClick:()=>p(s),"aria-label":"Открыть изображение",children:e.jsx("img",{className:n.img,src:s,alt:"",loading:"lazy"})})},r))}),e.jsx("div",{className:n.pagination,ref:a}),e.jsx(I,{src:d,onClose:()=>p(null)})]})}const z="_meta_apfoo_1",D="_item_apfoo_7",G="_label_apfoo_13",H="_value_apfoo_20",u={meta:z,item:D,label:G,value:H};function J({project:t}){const a=[t.customer&&{label:"Заказчик",value:t.customer},t.category&&{label:"Наименование проекта",value:t.category},t.area_m2&&{label:"Площадь",value:`${t.area_m2} м²`},t.city&&{label:"Локация",value:t.city},t.year&&{label:"Год создания",value:t.year}].filter(Boolean);return e.jsx("dl",{className:u.meta,"data-bitrix-block":"PROJECT_META",children:a.map((l,d)=>e.jsxs("div",{className:u.item,children:[e.jsx("dt",{className:u.label,children:l.label}),e.jsx("dd",{className:u.value,children:l.value})]},d))})}const F="_head_1l42r_1",V="_title_1l42r_8",W="_category_1l42r_14",Y="_row_1l42r_25",K="_projectMeta_1l42r_34",Q="_content_1l42r_43",o={head:F,title:V,category:W,row:Y,projectMeta:K,content:Q};function le(){const{slug:t=""}=f(),{data:a,isLoading:l}=h(t);return l||!a?e.jsx("div",{className:"skeleton-page"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(q,{images:a.gallery}),e.jsx("div",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:o.head,children:[e.jsx("h1",{className:o.title,children:a.title}),e.jsx("div",{className:o.category,children:a.category})]}),e.jsxs("div",{className:o.row,children:[e.jsx("aside",{className:o.projectMeta,children:e.jsx(J,{project:a})}),e.jsx("article",{className:o.content,children:a.content?e.jsx("div",{dangerouslySetInnerHTML:{__html:a.content}}):e.jsx("p",{children:a.excerpt})})]})]})}),e.jsx(R,{serviceSlug:a.serviceSlug,currentSlug:a.slug,limit:3})]})}export{le as default};
