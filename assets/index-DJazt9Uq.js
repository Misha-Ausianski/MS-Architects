import{a as g,j as e,r as _,b as y}from"./index-CM0wMAmI.js";import{B as b}from"./Breadcrumbs-CiNciMxG.js";import{a as x}from"./queries-C_v_KPDb.js";import{S as h,A as j,P as v,a as f,b as N}from"./pagination-PT4ZfUOR.js";import{R as P}from"./RelatedProjects-BaGWl8jz.js";import"./client-D8CvDP2x.js";import"./ProjectCard-BqkYPxE4.js";const w="_gallery_9yp22_24",k="_slide_9yp22_33",S="_img_9yp22_43",C="_pagination_9yp22_52",E="_bullet_9yp22_65",M="_progress_9yp22_82",r={gallery:w,slide:k,img:S,pagination:C,bullet:E,progress:M};function $({children:s}){return typeof document>"u"?null:g.createPortal(s,document.body)}const R="_overlay_1swdc_1",A="_img_1swdc_12",B="_close_1swdc_23",u={overlay:R,img:A,close:B};function L({src:s,onClose:a}){return s?e.jsx($,{children:e.jsxs("div",{className:u.overlay,onClick:a,children:[e.jsx("img",{className:u.img,src:s,alt:"",onClick:l=>l.stopPropagation()}),e.jsx("button",{className:u.close,onClick:a,"aria-label":"Close",children:"×"})]})}):null}function O({images:s}){const a=_.useRef(null),[l,i]=_.useState(null);return e.jsxs("div",{className:r.gallery,"data-bitrix-block":"PROJECT_GALLERY",children:[e.jsx(h,{modules:[j,v,f],slidesPerView:1,spaceBetween:0,loop:s.length>1,speed:600,watchOverflow:!0,observer:!0,observeParents:!0,resizeObserver:!0,autoHeight:!0,simulateTouch:!0,grabCursor:!0,autoplay:{delay:1e4,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{clickable:!0,renderBullet:(t,o)=>`<span class="${o} ${r.bullet}"><i class="${r.progress}"></i></span>`},onBeforeInit:t=>{t.params.pagination.el=a.current},onAutoplayTimeLeft:(t,o,p)=>{var m;const d=(m=a.current)==null?void 0:m.querySelector(".swiper-pagination-bullet-active");d&&d.style.setProperty("--p",`${Math.round((1-p)*100)}%`)},onSlideChange:()=>{var t;(t=a.current)==null||t.querySelectorAll(`.${r.bullet}`).forEach(o=>o.style.setProperty("--p","0%"))},children:s.map((t,o)=>e.jsx(N,{children:e.jsx("button",{className:r.slide,onClick:()=>i(t),"aria-label":"Открыть изображение",children:e.jsx("img",{className:r.img,src:t,alt:"",loading:"lazy"})})},o))}),e.jsx("div",{className:r.pagination,ref:a}),e.jsx(L,{src:l,onClose:()=>i(null)})]})}const T="_meta_apfoo_1",I="_item_apfoo_7",q="_label_apfoo_13",z="_value_apfoo_20",c={meta:T,item:I,label:q,value:z};function D({project:s}){const a=[s.customer&&{label:"Заказчик",value:s.customer},s.category&&{label:"Наименование проекта",value:s.category},s.area_m2&&{label:"Площадь",value:`${s.area_m2} м²`},s.city&&{label:"Локация",value:s.city},s.year&&{label:"Год создания",value:s.year}].filter(Boolean);return e.jsx("dl",{className:c.meta,"data-bitrix-block":"PROJECT_META",children:a.map((l,i)=>e.jsxs("div",{className:c.item,children:[e.jsx("dt",{className:c.label,children:l.label}),e.jsx("dd",{className:c.value,children:l.value})]},i))})}const G="_head_1bl8k_1",H="_title_1bl8k_7",J="_row_1bl8k_13",F="_projectMeta_1bl8k_21",V="_content_1bl8k_27",n={head:G,title:H,row:J,projectMeta:F,content:V};function ee(){const{slug:s=""}=y(),{data:a,isLoading:l}=x(s);return l||!a?e.jsx("div",{className:"skeleton-page"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(O,{images:a.gallery}),e.jsx("div",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:n.head,children:e.jsx("h1",{className:n.title,children:a.title})}),e.jsxs("div",{className:n.row,children:[e.jsx("aside",{className:n.projectMeta,children:e.jsx(D,{project:a})}),e.jsx("article",{className:n.content,children:a.content?e.jsx("div",{dangerouslySetInnerHTML:{__html:a.content}}):e.jsx("p",{children:a.excerpt})})]})]})}),e.jsx(P,{serviceSlug:a.serviceSlug,currentSlug:a.slug,limit:3})]})}export{ee as default};
