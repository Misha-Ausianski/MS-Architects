import{b as N,j as t,r as d,c as w}from"./index-BCRtabR4.js";import{B as P}from"./Breadcrumbs-BWvEbg3M.js";import{a as S}from"./queries-BAqNXMZo.js";import{S as R,A as C,P as E,a as k,N as z,b as $}from"./navigation-BqJOQW1A.js";import{R as q}from"./RelatedProjects-BAYzsvtG.js";import"./client-Bix7OX9s.js";import"./ProjectCard-9gquPjmz.js";const A="_gallery_1v1it_18",M="_slide_1v1it_27",T="_img_1v1it_37",B="_pagination_1v1it_46",L="_bullet_1v1it_59",O="_progress_1v1it_76",o={gallery:A,slide:M,img:T,pagination:B,bullet:L,progress:O};function I({children:s}){return typeof document>"u"?null:N.createPortal(s,document.body)}const D="_overlay_1swdc_1",F="_img_1swdc_12",G="_close_1swdc_23",g={overlay:D,img:F,close:G};function H({src:s,onClose:n}){return s?t.jsx(I,{children:t.jsxs("div",{className:g.overlay,onClick:n,children:[t.jsx("img",{className:g.img,src:s,alt:"",onClick:r=>r.stopPropagation()}),t.jsx("button",{className:g.close,onClick:n,"aria-label":"Close",children:"×"})]})}):null}function J({images:s}){const n=d.useRef(null),r=d.useRef(null),[m,_]=d.useState(null),y=(e,a)=>`<span class="${a} ${o.bullet}" tabindex="0">
       <i class="${o.progress}" data-progress></i>
     </span>`,b=e=>{var l,i,u,x,f,v,h,j;if(!e||!n.current)return;(!e.params.pagination||typeof e.params.pagination=="boolean")&&(e.params.pagination={enabled:!0});const a=e.params.pagination;a.el=n.current,a.clickable=!0,a.renderBullet=y,e.pagination&&((i=(l=e.pagination).destroy)==null||i.call(l),(x=(u=e.pagination).init)==null||x.call(u),(v=(f=e.pagination).render)==null||v.call(f),(j=(h=e.pagination).update)==null||j.call(h))};return d.useEffect(()=>{const e=r.current;if(!e)return;b(e);const a=setTimeout(()=>{var l,i;e.update(),(i=(l=e.pagination)==null?void 0:l.update)==null||i.call(l)},0);return()=>clearTimeout(a)},[s.length]),t.jsxs("div",{className:o.gallery,"data-bitrix-block":"PROJECT_GALLERY",children:[t.jsx(R,{modules:[C,E,k,z],onSwiper:e=>{r.current=e},onInit:e=>{b(e)},slidesPerView:"auto",spaceBetween:20,loop:s.length>1,speed:600,watchOverflow:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,updateOnWindowResize:!0,autoHeight:!0,simulateTouch:!0,grabCursor:!0,autoplay:{delay:1e4,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{enabled:!0,clickable:!0,renderBullet:y},onAfterInit:e=>{var a,l;e.update(),(l=(a=e.pagination)==null?void 0:a.update)==null||l.call(a)},onResize:e=>{var a,l;e.update(),(l=(a=e.pagination)==null?void 0:a.update)==null||l.call(a)},onImagesReady:e=>{var a,l;e.update(),(l=(a=e.pagination)==null?void 0:a.update)==null||l.call(a)},onAutoplayTimeLeft:(e,a,l)=>{var u;const i=(u=n.current)==null?void 0:u.querySelector(".swiper-pagination-bullet-active [data-progress]");i&&i.style.setProperty("--p",`${((1-l)*100).toFixed(0)}%`)},onSlideChange:()=>{var e;(e=n.current)==null||e.querySelectorAll("[data-progress]").forEach(a=>a.style.setProperty("--p","0%"))},children:s.map((e,a)=>t.jsx($,{style:{width:"auto"},children:t.jsx("button",{className:o.slide,onClick:()=>_(e),"aria-label":"Открыть изображение",children:t.jsx("img",{className:o.img,src:e,alt:"",loading:"lazy"})})},a))}),t.jsx("div",{className:`${o.pagination} swiper-pagination`,ref:n}),t.jsx(H,{src:m,onClose:()=>_(null)})]})}const V="_meta_apfoo_1",W="_item_apfoo_7",Y="_label_apfoo_13",K="_value_apfoo_20",p={meta:V,item:W,label:Y,value:K};function Q({project:s}){const n=[s.customer&&{label:"Заказчик",value:s.customer},s.category&&{label:"Наименование проекта",value:s.category},s.area_m2&&{label:"Площадь",value:`${s.area_m2} м²`},s.city&&{label:"Локация",value:s.city},s.year&&{label:"Год создания",value:s.year}].filter(Boolean);return t.jsx("dl",{className:p.meta,"data-bitrix-block":"PROJECT_META",children:n.map((r,m)=>t.jsxs("div",{className:p.item,children:[t.jsx("dt",{className:p.label,children:r.label}),t.jsx("dd",{className:p.value,children:r.value})]},m))})}const U="_head_zbqny_1",X="_title_zbqny_8",Z="_category_zbqny_14",ee="_row_zbqny_25",te="_projectMeta_zbqny_34",ae="_content_zbqny_43",c={head:U,title:X,category:Z,row:ee,projectMeta:te,content:ae};function ue(){const{slug:s=""}=w(),{data:n,isLoading:r}=S(s);return r||!n?t.jsx("div",{className:"skeleton-page"}):t.jsxs(t.Fragment,{children:[t.jsx(P,{}),t.jsx(J,{images:n.gallery}),t.jsx("div",{className:"section",children:t.jsxs("div",{className:"container",children:[t.jsxs("div",{className:c.head,children:[t.jsx("h1",{className:c.title,children:n.title}),t.jsx("div",{className:c.category,children:n.category})]}),t.jsxs("div",{className:c.row,children:[t.jsx("aside",{className:c.projectMeta,children:t.jsx(Q,{project:n})}),t.jsx("article",{className:c.content,children:n.content?t.jsx("div",{dangerouslySetInnerHTML:{__html:n.content}}):t.jsx("p",{children:n.excerpt})})]})]})}),t.jsx(q,{serviceSlug:n.serviceSlug,currentSlug:n.slug,limit:3})]})}export{ue as default};
