import{a as p,j as e,r as _,b as x}from"./index-WbfAkyw-.js";import{B as y}from"./Breadcrumbs-BEk6DvT6.js";import{a as b}from"./queries-CN2-Fxse.js";import{S as f,A as j,P as h,a as v,b as N}from"./pagination-BZ4wknrs.js";import{R as P}from"./RelatedProjects-B7aSsn0W.js";import"./client-WrvaJ67F.js";import"./ProjectCard-CcODr-AN.js";const w="_gallery_1u47s_2",C="_slide_1u47s_31",S="_img_1u47s_41",k="_pagination_1u47s_50",E="_bullet_1u47s_63",$="_progress_1u47s_80",r={gallery:w,slide:C,img:S,pagination:k,bullet:E,progress:$};function R({children:t}){return typeof document>"u"?null:p.createPortal(t,document.body)}const A="_overlay_1swdc_1",B="_img_1swdc_12",L="_close_1swdc_23",u={overlay:A,img:B,close:L};function O({src:t,onClose:s}){return t?e.jsx(R,{children:e.jsxs("div",{className:u.overlay,onClick:s,children:[e.jsx("img",{className:u.img,src:t,alt:"",onClick:l=>l.stopPropagation()}),e.jsx("button",{className:u.close,onClick:s,"aria-label":"Close",children:"×"})]})}):null}function T({images:t}){const s=_.useRef(null),[l,o]=_.useState(null);return e.jsxs("div",{className:r.gallery,"data-bitrix-block":"PROJECT_GALLERY",children:[e.jsx(f,{modules:[j,h,v],slidesPerView:1,spaceBetween:0,loop:t.length>1,speed:600,watchOverflow:!0,observer:!0,observeParents:!0,resizeObserver:!0,autoHeight:!0,simulateTouch:!0,grabCursor:!0,autoplay:{delay:1e4,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{clickable:!0,renderBullet:(a,n)=>`<span class="${n} ${r.bullet}"><i class="${r.progress}"></i></span>`},onBeforeInit:a=>{a.params.pagination.el=s.current},onAutoplayTimeLeft:(a,n,g)=>{var d;const m=(d=s.current)==null?void 0:d.querySelector(".swiper-pagination-bullet-active");m&&m.style.setProperty("--p",`${Math.round((1-g)*100)}%`)},onSlideChange:()=>{var a;(a=s.current)==null||a.querySelectorAll(`.${r.bullet}`).forEach(n=>n.style.setProperty("--p","0%"))},children:t.map((a,n)=>e.jsx(N,{children:e.jsx("button",{className:r.slide,onClick:()=>o(a),"aria-label":"Открыть изображение",children:e.jsx("img",{className:r.img,src:a,alt:"",loading:"lazy"})})},n))}),e.jsx("div",{className:r.pagination,ref:s}),e.jsx(O,{src:l,onClose:()=>o(null)})]})}const M="_meta_1629u_1",I="_item_1629u_9",q="_term_1629u_15",z="_def_1629u_23",i={meta:M,item:I,term:q,def:z};function D({project:t}){const s=[t.year&&{label:"Год",value:t.year},t.city&&{label:"Город",value:t.city},t.area_m2&&{label:"Площадь",value:`${t.area_m2} м²`},t.category&&{label:"Категория",value:t.category}].filter(Boolean);return e.jsx("dl",{className:i.meta,"data-bitrix-block":"PROJECT_META",children:s.map((l,o)=>e.jsxs("div",{className:i.item,children:[e.jsx("dt",{className:i.term,children:l.label}),e.jsx("dd",{className:i.def,children:l.value})]},o))})}const G="_title_1k5g2_1",H="_row_1k5g2_8",J="_metaCol_1k5g2_17",F="_content_1k5g2_23",c={title:G,row:H,metaCol:J,content:F};function Z(){const{slug:t=""}=x(),{data:s,isLoading:l}=b(t);return l||!s?e.jsx("div",{className:"skeleton-page"}):e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(T,{images:s.gallery}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"section",children:[e.jsx("h1",{className:c.title,children:s.title}),e.jsxs("div",{className:c.row,children:[e.jsx("aside",{className:c.metaCol,children:e.jsx(D,{project:s})}),e.jsx("article",{className:c.content,children:s.content?e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}}):e.jsx("p",{children:s.excerpt})})]})]})}),e.jsx(P,{serviceSlug:s.serviceSlug,currentSlug:s.slug,limit:3})]})}export{Z as default};
