import{a as p,j as e,r as _,b as x}from"./index-D3LsSvZe.js";import{B as y}from"./Breadcrumbs-C4854PUS.js";import{a as b}from"./queries-Do8Z_qMZ.js";import{S as h,A as j,P as v,a as f,N,b as P}from"./navigation-uMK4jYJq.js";import{R as k}from"./RelatedProjects-Dq-9kKIz.js";import"./client-C_A_N3UK.js";import"./ProjectCard-DojnpQ9-.js";const w="_gallery_34xk6_22",S="_slide_34xk6_31",C="_img_34xk6_41",E="_pagination_34xk6_50",M="_bullet_34xk6_63",$="_progress_34xk6_80",r={gallery:w,slide:S,img:C,pagination:E,bullet:M,progress:$};function R({children:a}){return typeof document>"u"?null:p.createPortal(a,document.body)}const A="_overlay_1swdc_1",B="_img_1swdc_12",L="_close_1swdc_23",u={overlay:A,img:B,close:L};function O({src:a,onClose:s}){return a?e.jsx(R,{children:e.jsxs("div",{className:u.overlay,onClick:s,children:[e.jsx("img",{className:u.img,src:a,alt:"",onClick:l=>l.stopPropagation()}),e.jsx("button",{className:u.close,onClick:s,"aria-label":"Close",children:"×"})]})}):null}function T({images:a}){const s=_.useRef(null),[l,i]=_.useState(null);return e.jsxs("div",{className:r.gallery,"data-bitrix-block":"PROJECT_GALLERY",children:[e.jsx(h,{modules:[j,v,f,N],slidesPerView:"auto",spaceBetween:20,loop:a.length>1,speed:600,watchOverflow:!0,observer:!0,observeParents:!0,resizeObserver:!0,autoHeight:!0,simulateTouch:!0,grabCursor:!0,autoplay:{delay:1e4,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{clickable:!0,renderBullet:(t,o)=>`<span class="${o} ${r.bullet}"><i class="${r.progress}"></i></span>`},onBeforeInit:t=>{t.params.pagination.el=s.current},onAutoplayTimeLeft:(t,o,g)=>{var m;const d=(m=s.current)==null?void 0:m.querySelector(".swiper-pagination-bullet-active");d&&d.style.setProperty("--p",`${Math.round((1-g)*100)}%`)},onSlideChange:()=>{var t;(t=s.current)==null||t.querySelectorAll(`.${r.bullet}`).forEach(o=>o.style.setProperty("--p","0%"))},children:a.map((t,o)=>e.jsx(P,{children:e.jsx("button",{className:r.slide,onClick:()=>i(t),"aria-label":"Открыть изображение",children:e.jsx("img",{className:r.img,src:t,alt:"",loading:"lazy"})})},o))}),e.jsx("div",{className:r.pagination,ref:s}),e.jsx(O,{src:l,onClose:()=>i(null)})]})}const I="_meta_apfoo_1",q="_item_apfoo_7",z="_label_apfoo_13",D="_value_apfoo_20",c={meta:I,item:q,label:z,value:D};function G({project:a}){const s=[a.customer&&{label:"Заказчик",value:a.customer},a.category&&{label:"Наименование проекта",value:a.category},a.area_m2&&{label:"Площадь",value:`${a.area_m2} м²`},a.city&&{label:"Локация",value:a.city},a.year&&{label:"Год создания",value:a.year}].filter(Boolean);return e.jsx("dl",{className:c.meta,"data-bitrix-block":"PROJECT_META",children:s.map((l,i)=>e.jsxs("div",{className:c.item,children:[e.jsx("dt",{className:c.label,children:l.label}),e.jsx("dd",{className:c.value,children:l.value})]},i))})}const H="_head_1l42r_1",J="_title_1l42r_8",F="_category_1l42r_14",V="_row_1l42r_25",Y="_projectMeta_1l42r_34",K="_content_1l42r_43",n={head:H,title:J,category:F,row:V,projectMeta:Y,content:K};function se(){const{slug:a=""}=x(),{data:s,isLoading:l}=b(a);return l||!s?e.jsx("div",{className:"skeleton-page"}):e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(T,{images:s.gallery}),e.jsx("div",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:n.head,children:[e.jsx("h1",{className:n.title,children:s.title}),e.jsx("div",{className:n.category,children:s.category})]}),e.jsxs("div",{className:n.row,children:[e.jsx("aside",{className:n.projectMeta,children:e.jsx(G,{project:s})}),e.jsx("article",{className:n.content,children:s.content?e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}}):e.jsx("p",{children:s.excerpt})})]})]})}),e.jsx(k,{serviceSlug:s.serviceSlug,currentSlug:s.slug,limit:3})]})}export{se as default};
